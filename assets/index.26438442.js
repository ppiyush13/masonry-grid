import{r as l,j as g,R as y,a as x}from"./vendor.68e0d535.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}};b();const p=new URL("https://api.giphy.com/v1/gifs/trending");p.searchParams.set("api_key","OoWza0uVc3TYKVYzWNJ9cbZLR60T6oN8");const v=(r=50)=>{let e=0;return async()=>{p.searchParams.set("limit",r.toString()),p.searchParams.set("offset",(e*r+1).toString()),e+=1;const i=await fetch(p.toString()),{data:s}=await i.json();return s}},w=r=>{const e=l.exports.useRef(null),[i,s]=l.exports.useState([]);return l.exports.useEffect(()=>{if(e.current==null)return;const t=new IntersectionObserver(async n=>{if(n[0].isIntersecting){const a=await r();s(h=>h.concat(a))}},{rootMargin:"20%"});return t.observe(e.current),()=>{e.current&&t.unobserve(e.current)}},[e.current]),{data:i,loaderRef:e}};const c=g.exports.jsx,m=g.exports.jsxs,R=({data:r})=>{const e=l.exports.useRef(0),i=l.exports.useRef([0,0,0,0]),[s,t]=l.exports.useState(()=>new Array(4).fill(null).map(()=>[]));return l.exports.useEffect(()=>{const n=o=>(16+ +o.height)/+o.width,a=()=>{const o=i.current;let u=0,d=o[0];for(let f=1;f<o.length;f++)o[f]<d&&(d=o[f],u=f);return u},h=[...s];for(let o=e.current;o<r.length;o++){const u=r[o].images,d=a();h[d].push(c(N,{dataItem:u},o)),i.current[d]+=n(u.downsized_small)}t(h),e.current=r.length},[r]),m("div",{className:"grid-pane",children:[c("div",{className:"lane",children:s[0]}),c("div",{className:"lane",children:s[1]}),c("div",{className:"lane",children:s[2]}),c("div",{className:"lane",children:s[3]})]})},N=({dataItem:r})=>c("video",{src:r.downsized_small.mp4,autoPlay:!0,muted:!0,loop:!0,width:"100%",preload:"none",crossOrigin:"anonymous",style:{aspectRatio:`${r.downsized_small.width} / ${r.downsized_small.height}`,backgroundColor:L()}}),L=()=>{const r=["rgb(255, 243, 92)","rgb(255, 102, 102)","rgb(153, 51, 255)","rgb(0, 255, 153)","rgb(0, 204, 255)"],e=Math.floor(Math.random()*100)%r.length;return r[e]},O=v();function j(){const{data:r,loaderRef:e}=w(O);return m("main",{className:"App",children:[c(R,{data:r}),c("div",{ref:e,style:{height:"1px"}})]})}y.render(c(x.StrictMode,{children:c(j,{})}),document.getElementById("root"));
