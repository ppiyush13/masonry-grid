import{r as i,j as h,R as v,a as b}from"./vendor.68e0d535.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}};R();const m=new URL("https://api.giphy.com/v1/gifs/trending");m.searchParams.set("api_key","OoWza0uVc3TYKVYzWNJ9cbZLR60T6oN8");const w=(r=50)=>{let e=0;return async()=>{m.searchParams.set("limit",r.toString()),m.searchParams.set("offset",(e*r+1).toString()),e+=1;const s=await fetch(m.toString()),{data:o}=await s.json();return o}},N=r=>{const e=i.exports.useRef(null),[s,o]=i.exports.useState([]);return i.exports.useEffect(()=>{if(e.current==null)return;const t=new IntersectionObserver(async n=>{if(n[0].isIntersecting){const l=await r();o(p=>p.concat(l))}},{rootMargin:"20%"});return t.observe(e.current),()=>{e.current&&t.unobserve(e.current)}},[e.current]),{data:s,loaderRef:e}};const a=h.exports.jsx,g=h.exports.jsxs,L=h.exports.Fragment,E=()=>{const r=["rgb(255, 243, 92)","rgb(255, 102, 102)","rgb(153, 51, 255)","rgb(0, 255, 153)","rgb(0, 204, 255)"],e=Math.floor(Math.random()*100)%r.length;return r[e]},I=r=>(16+ +r.height)/r.width,M=r=>{const e=document.createElement("div"),s=r.downsized_small,t=`
    <video
      src="${s.mp4}"
      autoplay
      muted
      loop
      width="100%"
      title={title}
      preload="none"
      crossorigin="anonymous"
      style="aspect-ratio: ${s.width} / ${s.height}; background-color: ${E()}"
    ></video>
  `;return e.innerHTML=t,e},O=({data:r})=>{const e=i.exports.useRef(),s=i.exports.useRef(),o=i.exports.useRef(),t=i.exports.useRef(),n=i.exports.useRef(0),l=i.exports.useRef([0,0,0,0]);return i.exports.useEffect(()=>{if(!r||r.length===0)return;const p=()=>{const c=l.current;let u=0,d=c[0];for(let f=1;f<c.length;f++)c[f]<d&&(d=c[f],u=f);return u},y=[e,s,o,t];console.time("start"),new Array(4).fill("");let x=new Array(4).fill(null).map(()=>document.createDocumentFragment());for(let c=n.current;c<r.length;c++){const u=r[c].images,d=p();x[d].appendChild(M(u).firstElementChild),l.current[d]+=I(u.downsized_small)}y.forEach((c,u)=>{c.current.appendChild(x[u])}),console.timeEnd("start"),n.current=r.length},[r]),g(L,{children:[g("div",{className:"grid-pane",children:[a("div",{className:"lane",ref:e}),a("div",{className:"lane",ref:s}),a("div",{className:"lane",ref:o}),a("div",{className:"lane",ref:t})]}),a("div",{style:{height:"1px"}})]})},j=w();function A(){const{data:r,loaderRef:e}=N(j);return g("main",{className:"App",children:[a(O,{data:r}),a("div",{ref:e,style:{height:"1px"}})]})}v.render(a(b.StrictMode,{children:a(A,{})}),document.getElementById("root"));
